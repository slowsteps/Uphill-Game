package  {		import flash.display.MovieClip;	import flash.events.Event;	import flash.utils.Timer;	import flash.events.TimerEvent;			public class Emitter extends MovieClip {				private var mainscript:Main;		private var particlepool:Array;		public var emitTimer:Timer 		public var followclip:MovieClip;		public var offsetx:Number;		public var offsety:Number;				public function Emitter() {					}				//ERROR offsets don't update rotation				public function setup(caller,follow,xoff,yoff) {			mainscript = caller;			followclip = follow;			offsetx = xoff;			offsety = yoff;			createParticlePool();			emitTimer = new Timer(60,0);			emitTimer.addEventListener(TimerEvent.TIMER,onEmit)			emitTimer.start();		}				private function createParticlePool() {			particlepool = new Array();			for (var i=0;i<30;i++) {				var aParticle:Particle = new Particle();				mainscript.zoomcontainer.addChild(aParticle);				//mainscript.addChild(aParticle);				//addChild(aParticle);				particlepool.push(aParticle);			}		}			private function onEmit(e:Event) {			for each (var aParticle:Particle in particlepool) {				if (aParticle.available) {					aParticle.begin(mainscript,this);					break;				}			}		}		}	}